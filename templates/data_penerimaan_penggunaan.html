{% extends "base.html" %}
{% block title %}Data Penerimaan Penggunaan Bahan Kimia{% endblock %}
{% block content %}
<header>
    <h1>Data Penerimaan Penggunaan Bahan Kimia</h1>
</header>
<div class="container text-center">
    <div class="row">
        <div class="col">
            <table class="table-data-bahan">
                <thead>
                    <tr>
                        <th scope="col" colspan="4">Data Bahan Kimia</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="data-bahan">Nama Bahan Kimia</td>
                        <td class="data-bahan">________________</td>
                    </tr>
                    <tr>
                        <td class="data-bahan">Merek Dagang</td>
                        <td class="data-bahan">________________</td>
                    </tr>
                    <tr>
                        <td class="data-bahan">Jumlah Maksimum Inventori</td>
                        <td class="data-bahan">________________</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col">
            <table class="table-lokasi-bahan">
                <thead>
                    <tr>
                        <th scope="col" colspan="4">Lokasi Bahan Kimia</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="data-bahan">Ruang</td>
                        <td class="data-bahan">________________</td>
                    </tr>
                    <tr>
                        <td class="data-bahan">Lokasi</td>
                        <td class="data-bahan">________________</td>
                    </tr>
                    <tr>
                        <td class="data-bahan">Bangunan</td>
                        <td class="data-bahan">________________</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col">
            <table class="table-pabrik-pembuat">
                <thead>
                    <tr>
                        <th scope="col" colspan="4">Data Pabrik Pembuat</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="data-bahan">Nama Pabrik Pembuat</td>
                        <td class="data-bahan">________________</td>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <form action="" method="post">
            <table class="table-penerimaan-penggunaan">
                <thead>
                    <tr>
                        <th scope="col">Tanggal</th>
                        <th scope="col">Jenis Transaksi</th>
                        <th scope="col">Jumlah</th>
                        <th scope="col">Unit</th>
                        <th scope="col">Keterangan</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <tr class="data-row">
                        <td>
                            <input id="startDate" class="form-control" type="date" name="tanggal[]" />
                        </td>
                        <td><select id='jenis-transaksi' name="jenis-transaksi[]" class="form-select">
                                <option value="1">Penerimaan</option>
                                <option value="2">Penggunaan</option>
                            </select></td>
                        <td><input id="jumlah" name="jumlah[]" type="text" class="form-control"></td>
                        <td><select name="unit[]" class="form-select">
                                <option value="1">Gram</option>
                                <option value="2">Kilogram</option>
                                <option value="3">Kiloliter</option>
                                <option value="4">Kotak</option>
                                <option value="5">Kilo</option>
                                <option value="6">Mililiter</option>
                                <option value="7">Ton</option>
                            </select></td>
                        <td><input name="keterangan[]" id="keterangan" type="text" class="form-control keterangan"
                                aria-label="jumlah"></td>
                    </tr>
                </tbody>
                <tr>
                    <td colspan="5"><button class="submit-button btn-primary" type="submit"
                            value="Submit">Submit</button></td>
                </tr>
            </table>
        </form>
    </div>
</div>

<script>
    // Ambil referensi ke elemen tabel
    const tableBody = document.getElementById('table-body');

    // Fungsi untuk menambahkan baris baru
    function addNewRow() {
        // Buat elemen baris baru
        const newRow = document.createElement('tr');
        newRow.classList.add('data-row');

        // Tambahkan kolom ke baris baru
        newRow.innerHTML = `
                    <td>
                        <input name="tanggal[]" class="form-control" type="date" />
                    </td>
                    <td>
                        <select name="jenis-transaksi[]" class="form-select">
                            <option value="1">Penerimaan</option>
                            <option value="2">Penggunaan</option>
                        </select>
                    </td>
                    <td>
                        <input name="jumlah[]" type="text" class="form-control">
                    </td>
                    <td>
                        <select name="unit[]" class="form-select">
                            <option value="1">Gram</option>
                            <option value="2">Kilogram</option>
                            <option value="3">Kiloliter</option>
                            <option value="4">Kotak</option>
                            <option value="5">Kilo</option>
                            <option value="6">Mililiter</option>
                            <option value="7">Ton</option>
                        </select>
                    </td>
                    <td>
                        <input name="keterangan[]" type="text" class="keterangan" aria-label="keterangan">
                    </td>
                `;

        // Tambahkan baris baru ke tabel
        tableBody.appendChild(newRow);
    }

    // Event listener untuk menambahkan baris baru ketika baris terakhir terisi
    tableBody.addEventListener('input', function (event) {
        const lastRow = tableBody.lastElementChild;
        const allInputs = lastRow.querySelectorAll('input, select');
        const allFilled = Array.from(allInputs).every(input => input.value.trim() !== '');
        if (allFilled) {
            addNewRow();
        }
    });
</script>
{% endblock %}